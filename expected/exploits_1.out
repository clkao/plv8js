CREATE OR REPLACE FUNCTION exploit_alive () RETURNS boolean AS $$
    plv8.elog(INFO, "Alive!");
    return true;
$$ language plv8;
select exploit_alive();
INFO:  Alive!
 exploit_alive 
---------------
 t
(1 row)

DO $$
    '1'.repeat(0x7ffffff).split('');
$$ language plv8;
ERROR:  RangeError: Invalid array length
CONTEXT:  undefined() LINE 2:     '1'.repeat(0x7ffffff).split('');
select exploit_alive();
INFO:  Alive!
 exploit_alive 
---------------
 t
(1 row)

DO $$
    '1'.repeat(0x7ffffff).split(/./);
$$ language plv8;
ERROR:  out of memory
select exploit_alive();
INFO:  Alive!
 exploit_alive 
---------------
 t
(1 row)

DO $$
    '1'.repeat(0x7ffffff).split(/1/);
$$ language plv8;
ERROR:  out of memory
select exploit_alive();
INFO:  Alive!
 exploit_alive 
---------------
 t
(1 row)

DO $$
    [].join.call('1'.repeat(0x7ffffff));
$$ language plv8;
ERROR:  out of memory
select exploit_alive();
INFO:  Alive!
 exploit_alive 
---------------
 t
(1 row)

DO $$
    [].slice.call('1'.repeat(0x7ffffff));
$$ language plv8;
ERROR:  out of memory
select exploit_alive();
INFO:  Alive!
 exploit_alive 
---------------
 t
(1 row)

DO $$
    [].sort.call('1'.repeat(0x7ffffff));
$$ language plv8;
ERROR:  out of memory
select exploit_alive();
INFO:  Alive!
 exploit_alive 
---------------
 t
(1 row)

DO $$
    JSON.parse('[' + '1,'.repeat(0x7fffffd) + '1]');
$$ language plv8;
ERROR:  out of memory
select exploit_alive();
INFO:  Alive!
 exploit_alive 
---------------
 t
(1 row)

DROP FUNCTION exploit_alive;
