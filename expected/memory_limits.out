do $$
  const limit = plv8.execute(`select setting from pg_settings where name = $1`, ['plv8.memory_limit'])[0].setting;
  const a = new ArrayBuffer(limit*1024*1024/2);
$$ language plv8;
do $$
  const limit = plv8.execute(`select setting from pg_settings where name = $1`, ['plv8.memory_limit'])[0].setting;
  const a = new ArrayBuffer(limit*1024*1024/2);
$$ language plv8;
do $$
  const limit = plv8.execute(`select setting from pg_settings where name = $1`, ['plv8.memory_limit'])[0].setting;
  const a = new ArrayBuffer(limit*1024*1024);
$$ language plv8;
ERROR:  RangeError: Array buffer allocation failed
CONTEXT:  undefined() LINE 3:   const a = new ArrayBuffer(limit*1024*1024);
do $$
  const limit = plv8.execute(`select setting from pg_settings where name = $1`, ['plv8.memory_limit'])[0].setting;
  const a = new ArrayBuffer(limit*1024*1024/1.01);
  const s = [];
  while(true) {
    s.push(new ArrayBuffer(63)) // small non-aligned allocations
  }
$$ language plv8;
FATAL:  plv8: OOM in ArrayAllocator
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
connection to server was lost
